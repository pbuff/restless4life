<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Tic Tac Toe</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/style.css">
  <script src="js/prefixfree.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<script>
    var Global = [[0,0,0], [0,0,0], [0,0,0]];
    var Turn = 1;
    var Count = 0;
    var LastTurn = null;
    function ChoosePlayer() { 
        if (Turn==1) {
            Turn=2;
            document.getElementById("Player2").style.backgroundColor = "red";
            document.getElementById("Player1").style.backgroundColor = "black";
        } else {
            Turn=1;
            document.getElementById("Player1").style.backgroundColor = "red";
            document.getElementById("Player2").style.backgroundColor = "black";
        }
    }
    function Validate(player) {
        var Win = 0;
        // Check all the rows for straight marks
        for(var i=0; i<=2; i++) {
            Win = 0;
            for(var j=0; j<=2; j++) {
                if (Global[i][j]==player) {
                    Win++;
                }
            }
            if (Win == 3) return 1;
        }

        // Check all the columns for straight marks
        for(var i=0; i<=2; i++) {
            Win = 0;
            for(var j=0; j<=2; j++) {
                if (Global[j][i]==player) {
                    Win++;
                }
            }
            if (Win == 3) return 1;
        }

        // Check all the diagnols for straight marks
        Win = 0;
        for(var i=0; i<=2; i++) {
            if (Global[i][i]==player) {
                Win++;
            }
            if (Win == 3) return 1;
        }

        Win = 0;
        for(var i=2; i>=0; i--) {
            if (Global[2-i][i]==player) {
                Win++;
            }
            if (Win == 3) return 1;
        }
    }

    function MyFunction(x, y)
    {
        if (Turn == null)
        { alert("No Player Selected"); }
        else if (LastTurn == Turn)
        { alert("Same player can't select twice.");}
        else { 
            console.log("Turn = Player " + Turn);
            var id = x.toString() + y.toString();
            if (Global[x][y] == 0) {
                LastTurn = Turn;
                Global[x][y] = Turn;
                Count++;
                if (Turn==1) {s="0"} else {s="X"};
                document.getElementById(id).innerHTML = s;
                if (Validate(Turn) == 1) {
                    document.getElementsByTagName("h1")[0].innerHTML="Player"+Turn+" WON";
                    alert("Congratulations: Player"+Turn+" WON!!");
                    location.reload();
                } else if(Count == 9) {
                    alert("Match is a draw!!");
                    location.reload();
                }
                ChoosePlayer();
                console.log("Global["+x+"]["+y+"] = "+ Global[x][y]);
            } else {
                alert("This box is already taken.");
            }
            
        }
    }
</script>
</header>

<body>

<h1 class="text-center pt-5">Start of making Tic Tac Toe</h1>
<div class="container-fluid col-md-3 col-md-offset-4 pt-5">
<table class="table-bordered table-responsive-md w-50 text-center">
        <tr>
            <td> <div href="#" onclick="MyFunction(0,0)"> <a id="00">-</a></div> </td>
            <td> <div href="#" onclick="MyFunction(0,1)"> <a id="01">-</a></div> </td>
            <td> <div href="#" onclick="MyFunction(0,2)"> <a id="02">-</a></div> </td>
        </tr>
        <tr>
            <td> <div href="#" onclick="MyFunction(1,0)"><a id="10">-</a></div> </td>
            <td> <div href="#" onclick="MyFunction(1,1)"><a id="11">-</a></div> </td>
            <td> <div href="#" onclick="MyFunction(1,2)"><a id="12">-</a></div> </td>
        </tr>
        <tr>
            <td> <div href="#" onclick="MyFunction(2,0)"><a id="20">-</a></div> </td>
            <td> <div href="#" onclick="MyFunction(2,1)"><a id="21">-</a></div> </td>
            <td> <div href="#" onclick="MyFunction(2,2)"><a id="22">-</a></div> </td>
        </tr>
</table>
</div>
<div class="container-fluid col-md-3 col-md-offset-4 content pt-5">
    <button id="Player1" class="btn btn-primary">Player 1 (0)</button>
    <button id="Player2" class="btn btn-secondary">Player 2 (X)</button>
</div>
</div>
</body>
</html>